{"version":3,"sources":["../../app-es6/controllers/LoginController.js"],"names":["LoginController","$select","document","querySelector","bind","login","senha","form","usuarioService","UsuariosService","mensagem","Bind","Mensagem","MensagemView","init","onsubmit","enviaLogin","call","event","loginVal","value","senhaVal","json","console","log","preventDefault","alert","promise","SubmeterLogin","pegaDadoForm","then","window","location","catch","err","novaMsg"],"mappings":";;;;;;IAAMA,e;AACL,4BAAa;AAAA;;AACZ,MAAIC,UAAUC,SAASC,aAAT,CAAuBC,IAAvB,CAA4BF,QAA5B,CAAd;AACA,OAAKG,KAAL,GAAaJ,QAAQ,QAAR,CAAb;AACA,OAAKK,KAAL,GAAaL,QAAQ,QAAR,CAAb;AACA,OAAKM,IAAL,GAAYN,QAAQ,aAAR,CAAZ;AACA,OAAKO,cAAL,GAAsB,IAAIC,eAAJ,EAAtB;AACA,OAAKC,QAAL,GAAiB,IAAIC,IAAJ,CAChB,IAAIC,QAAJ,EADgB,EAEhB,IAAIC,YAAJ,CAAiBZ,QAAQ,eAAR,CAAjB,CAFgB,EAGhB,SAHgB,CAAjB;;AAKA,OAAKa,IAAL;AAEA;;;;yBAEK;AAAA;;AAEL,QAAKP,IAAL,CAAUQ,QAAV,GAAqB;AAAA,WAAS,MAAKC,UAAL,CAAgBC,IAAhB,QAA2BC,KAA3B,CAAT;AAAA,IAArB;AACA;;;iCACa;AACb,OAAIC,WAAW,KAAKd,KAAL,CAAWe,KAA1B;AACA,OAAIC,WAAW,KAAKf,KAAL,CAAWc,KAA1B;;AAEA,OAAIE,OAAO,EAAC,SAASH,QAAV,EAAmB,SAASE,QAA5B,EAAX;AACA,UAAOC,IAAP;AACA;;;6BACUJ,K,EAAM;AAAA;;AAEhBK,WAAQC,GAAR,CAAY,MAAZ,EAAoB,IAApB,EAA0B,QAA1B,EAAoCN,KAApC;AACAA,SAAMO,cAAN;;AAEAC,SAAM,UAAN;AACA,OAAIC,UAAU,KAAKnB,cAAL,CAAoBoB,aAApB,CAAkC,KAAKC,YAAL,EAAlC,CAAd;AACAF,WACCG,IADD,CACM,eAAM;AACXC,WAAOC,QAAP,CAAgB,GAAhB;AACA,IAHD,EAICC,KAJD,CAIO,eAAM;AACZV,YAAQC,GAAR,CAAYU,GAAZ;AACA,WAAKxB,QAAL,CAAcyB,OAAd,CAAsB,0BAAtB,EAAkD,QAAlD,EAA4D,IAA5D;AACA,IAPD;AAQA","file":"LoginController.js","sourcesContent":["class LoginController{\r\n\tconstructor(){\r\n\t\tlet $select = document.querySelector.bind(document);\r\n\t\tthis.login = $select(\"#login\");\r\n\t\tthis.senha = $select(\"#senha\");\r\n\t\tthis.form = $select(\"#form-login\");\r\n\t\tthis.usuarioService = new UsuariosService();\r\n\t\tthis.mensagem =  new Bind(\r\n\t\t\tnew Mensagem(),\r\n\t\t\tnew MensagemView($select(\"#mensagemView\")),\r\n\t\t\t'novaMsg');\r\n\r\n\t\tthis.init();\r\n\r\n\t}\r\n\r\n\tinit(){\r\n\r\n\t\tthis.form.onsubmit = event => this.enviaLogin.call(this, event);\r\n\t}\r\n\tpegaDadoForm(){\r\n\t\tlet loginVal = this.login.value;\r\n\t\tlet senhaVal = this.senha.value;\r\n\r\n\t\tlet json = {'login': loginVal,'senha': senhaVal};\r\n\t\treturn json;\r\n\t}\r\n\tenviaLogin(event){\r\n\t\t\r\n\t\tconsole.log('this', this, 'event:', event);\r\n\t\tevent.preventDefault();\r\n\r\n\t\talert('um tempo');\r\n\t\tlet promise = this.usuarioService.SubmeterLogin(this.pegaDadoForm());\r\n\t\tpromise\r\n\t\t.then(res =>{\r\n\t\t\twindow.location('/');\r\n\t\t})\r\n\t\t.catch(err =>{\r\n\t\t\tconsole.log(err);\r\n\t\t\tthis.mensagem.novaMsg('login e senha invalidos.', \"danger\", 4400);\r\n\t\t});\r\n\t}\r\n\r\n}"]}