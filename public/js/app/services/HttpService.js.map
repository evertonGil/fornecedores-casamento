{"version":3,"sources":["../../app-es6/services/HttpService.js"],"names":["HttpService","res","ok","console","log","Error","statusText","token","headers","get","window","sessionStorage","location","pathname","_temtokenSessionStorage","url","header","fetch","_setaHeader","then","_handleErrors","json","dado","method","body","_temTokenNaResposta","JSON","stringify"],"mappings":";;;;;;IAAMA,W;;;;;;;gCAESC,G,EAAI;AACjB,OAAG,CAACA,IAAIC,EAAR,EAAY;AACXC,YAAQC,GAAR,CAAY,kCAAZ;AACA,UAAM,IAAIC,KAAJ,CAAUJ,IAAIK,UAAd,CAAN;AACA;AACD,UAAOL,GAAP;AACA;;;sCACmBA,G,EAAI;AACvB,OAAIM,QAAQN,IAAIO,OAAJ,CAAYC,GAAZ,CAAgB,gBAAhB,CAAZ;AACA,OAAGF,KAAH,EAAS;AACRG,WAAOC,cAAP,CAAsBJ,KAAtB,GAA8BA,KAA9B;AACA;AACD,UAAON,GAAP;AACA;;;4CACwB;AACxB,OAAGS,OAAOC,cAAP,CAAsBJ,KAAzB,EAA+B;AAC9B,WAAOG,OAAOC,cAAP,CAAsBJ,KAA7B;AACA,IAFD,MAGI;AACH,QAAGG,OAAOE,QAAP,CAAgBC,QAAhB,IAA4B,aAA/B,EAA6C;AAC5CH,YAAOE,QAAP,GAAkB,aAAlB;AACA;AACD,WAAO,IAAP;AACA;AACD;;;8BACWJ,O,EAAQ;AACnB,OAAID,QAAQ,KAAKO,uBAAL,EAAZ;AACA,OAAGP,KAAH,EAAS;AACRC,YAAQ,gBAAR,IAA4BD,KAA5B;AACA;AACD,UAAOC,OAAP;AACA;;;sBAGGO,G,EAAI;AAAA;;AACP,OAAIC,SAAS,EAAb;;AAEA,UAAOC,MAAMF,GAAN,EAAW;AACjBP,aAAS,KAAKU,WAAL,CAAiBF,MAAjB;AADQ,IAAX,EAGNG,IAHM,CAGD;AAAA,WAAO,MAAKC,aAAL,CAAmBnB,GAAnB,CAAP;AAAA,IAHC,EAINkB,IAJM,CAID;AAAA,WAAOlB,IAAIoB,IAAJ,EAAP;AAAA,IAJC,CAAP;AAKA;;;uBAEIN,G,EAAKO,I,EAAMN,M,EAAO;AAAA;;AACtB,UAAOC,MAAMF,GAAN,EAAW;AACjBP,aAAS,KAAKU,WAAL,CAAiBF,MAAjB,CADQ;AAEjBO,YAAQ,MAFS;AAGjBC,UAAMF;AAHW,IAAX,EAKNH,IALM,CAKD;AAAA,WAAO,OAAKC,aAAL,CAAmBnB,GAAnB,CAAP;AAAA,IALC,EAMNkB,IANM,CAMD;AAAA,WAAO,OAAKM,mBAAL,CAAyBxB,GAAzB,CAAP;AAAA,IANC,EAONkB,IAPM,CAOD;AAAA,WAAOlB,IAAIoB,IAAJ,EAAP;AAAA,IAPC,CAAP;AAQA;;;0BAEMN,G,EAAKC,M,EAAO;AAAA;;AAClB,UAAOC,MAAMF,GAAN,EAAW;AACjBQ,YAAQ,QADS;AAEjBf,aAAS,KAAKU,WAAL,CAAiBF,MAAjB;AAFQ,IAAX,EAING,IAJM,CAID;AAAA,WAAO,OAAKC,aAAL,CAAmBnB,GAAnB,CAAP;AAAA,IAJC,EAKNkB,IALM,CAKD;AAAA,WAAOlB,GAAP;AAAA,IALC,CAAP;AAMA;;;sBAEGc,G,EAAKO,I,EAAMN,M,EAAO;AAAA;;AACrB,UAAOC,MAAMF,GAAN,EAAW;AACjBP,aAAS,KAAKU,WAAL,CAAiBF,MAAjB,CADQ;AAEjBO,YAAQ,KAFS;AAGjBC,UAAME,KAAKC,SAAL,CAAeL,IAAf;AAHW,IAAX,EAKNH,IALM,CAKD;AAAA,WAAO,OAAKC,aAAL,CAAmBnB,GAAnB,CAAP;AAAA,IALC,EAMNkB,IANM,CAMD;AAAA,WAAOlB,IAAIoB,IAAJ,EAAP;AAAA,IANC,CAAP;AAOA","file":"HttpService.js","sourcesContent":["class HttpService{\r\n\r\n\t_handleErrors(res){\r\n\t\tif(!res.ok) {\r\n\t\t\tconsole.log(\"errors disparado por HttpService\");\r\n\t\t\tthrow new Error(res.statusText)\r\n\t\t}\r\n\t\treturn res\r\n\t}\r\n\t_temTokenNaResposta(res){\r\n\t\tlet token = res.headers.get('x-access-token');\t\r\n\t\tif(token){\r\n\t\t\twindow.sessionStorage.token = token;\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\t_temtokenSessionStorage(){\r\n\t\tif(window.sessionStorage.token){\r\n\t\t\treturn window.sessionStorage.token;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(window.location.pathname != \"/login.html\"){\r\n\t\t\t\twindow.location = \"/login.html\";\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\t_setaHeader(headers){\r\n\t\tlet token = this._temtokenSessionStorage();\r\n\t\tif(token){\r\n\t\t\theaders['x-access-token'] = token;\r\n\t\t}\r\n\t\treturn headers;\r\n\t}\r\n\r\n\r\n\tget(url){\r\n\t\tlet header = {};\r\n\r\n\t\treturn fetch(url, {\r\n\t\t\theaders: this._setaHeader(header)\r\n\t\t})\r\n\t\t.then(res => this._handleErrors(res))\r\n\t\t.then(res => res.json());\r\n\t}\r\n\r\n\tpost(url, dado, header){\r\n\t\treturn fetch(url, {\r\n\t\t\theaders: this._setaHeader(header),\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: dado\r\n\t\t})\r\n\t\t.then(res => this._handleErrors(res))\r\n\t\t.then(res => this._temTokenNaResposta(res))\r\n\t\t.then(res => res.json());\r\n\t}\r\n\t\r\n\tdelete(url, header){\r\n\t\treturn fetch(url, {\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\theaders: this._setaHeader(header)\r\n\t\t})\r\n\t\t.then(res => this._handleErrors(res))\r\n\t\t.then(res => res);\r\n\t}\r\n\r\n\tput(url, dado, header){\r\n\t\treturn fetch(url, {\r\n\t\t\theaders: this._setaHeader(header),\r\n\t\t\tmethod: 'PUT',\r\n\t\t\tbody: JSON.stringify(dado)\r\n\t\t})\r\n\t\t.then(res => this._handleErrors(res))\r\n\t\t.then(res => res.json());\r\n\t}\r\n}"]}