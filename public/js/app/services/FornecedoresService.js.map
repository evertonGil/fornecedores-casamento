{"version":3,"sources":["../../app-es6/services/FornecedoresService.js"],"names":["FornecedoresService","_http","HttpService","convidados","Promise","resolve","reject","get","then","res","sort","a","b","nome","toLowerCase","map","listaCardapios","Cardapios","listaAnexos","Anexos","objeto","cardapios","Cardapio","item","valorPorPessoa","aluguel","dj","decoracao","forEach","adiciona","cardapio","anexos","Anexo","link","anexo","forn","Fornecedor","_id","qtdMax","local","tipo","observacoes","catch","console","log","err","dado","header","post","JSON","stringify","id","put","delete","subDiretorio","fileName","idfornecedor","arquivo","subdir","idFornecedor"],"mappings":"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","file":"FornecedoresService.js","sourcesContent":["class FornecedoresService{\r\n\tconstructor(){\r\n\t\tthis._http = new HttpService();\r\n\t}\r\n\tobterListaFornecedores(convidados){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tthis._http.get('v1/fornecedores')\r\n\t\t\t.then(res => {\r\n\t\t\t\tresolve(\r\n\t\t\t\t\tres\r\n\t\t\t\t\t.sort((a, b) =>{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(a.nome.toLowerCase() > b.nome.toLowerCase()){\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(a.nome.toLowerCase() < b.nome.toLowerCase()){\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.map(objeto => {\r\n\t\t\t\t\t\tlet listaCardapios = new Cardapios();\r\n\t\t\t\t\t\tlet listaAnexos = new Anexos();\r\n\r\n\t\t\t\t\t\tobjeto.cardapios\r\n\t\t            \t.map(item => new Cardapio(item.nome, item.valorPorPessoa, item.aluguel, item.dj, item.decoracao, convidados))\r\n\t\t            \t.forEach(cardapio => {\r\n\t\t            \t\tlistaCardapios.adiciona(cardapio)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tobjeto.anexos\r\n\t\t\t\t\t\t.map(item => {\r\n\t\t\t\t\t\t\t//console.log(item.link);\r\n\t\t\t\t\t\t\treturn new Anexo(item.link);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.forEach(anexo =>{\r\n\t\t\t\t\t\t\tlistaAnexos.adiciona(anexo);\r\n\t\t\t\t\t\t\t//console.log(listaAnexos);\r\n\t\t\t\t\t\t})\r\n\t\t            \t\r\n\t\t            \tvar forn = new Fornecedor(objeto._id, objeto.nome, objeto.qtdMax, objeto.local, objeto.tipo, objeto.observacoes, listaCardapios , objeto.link, listaAnexos);\r\n\r\n\t\t\t\t \t\treturn  forn;\r\n\t\t\t\t })\r\n\t\t\t\t)\r\n\t\t\t})\r\n\t\t\t.catch(err =>{\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t    reject('Não foi possível obter os fornecedores do servidor.')\r\n\t\t\t});\r\n\r\n\t\t})\r\n\t}\r\n\r\n\tenviarNovoFornecedor(dado){\r\n\r\n\t\tlet header = {'content-type': 'application/json'};\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis._http.post('v1/fornecedores', JSON.stringify(dado), header)\r\n\t\t\t.then(res => resolve(res))\r\n\t\t\t.catch(err =>{\r\n\t\t\t\t//console.log(err);\r\n\t\t\t    reject(err)\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n\teditaFornecedor(id, dado){\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tthis._http.put(`v1/fornecedores/${id}`, dado)\r\n\t\t\t.then(res => resolve(res))\r\n\t\t\t.catch(err =>{\r\n\t\t\t\t//console.log(err);\r\n\t\t\t    reject(err)\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n\tdeletaFornecedorPorId(id){\r\n\r\n\t\treturn new Promise((resolve, reject) =>{\r\n\r\n\t\t\tthis._http.delete(`v1/fornecedores/${id}`)\r\n\t\t\t.then(res => resolve(res))\r\n\t\t\t.catch(err =>{\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t    reject('Não foi possível deletar os fornecedores.')\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n\tlistaTipo(){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tthis._http.get(`v1/tipofornecedor`)\r\n\t\t\t.then(res => resolve(res))\r\n\t\t\t.catch(err =>{\r\n\t\t\t    reject(err);\r\n\t\t\t});\r\n\r\n\t\t})\r\n\t}\r\n\r\n\tadicionaTipo(dado){\r\n\r\n\t\tlet header = {'content-type': 'application/json'};\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tthis._http.post(`v1/tipofornecedor`, JSON.stringify(dado), header)\r\n\t\t\t.then(res => resolve(res))\r\n\t\t\t.catch(err =>{\r\n\t\t\t    reject(err);\r\n\t\t\t});\r\n\r\n\t\t})\r\n\t}\r\n\r\n\tlistaLocal(){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tthis._http.get(`v1/localfornecedor`)\r\n\t\t\t.then(res => resolve(res))\r\n\t\t\t.catch(err =>{\r\n\t\t\t    reject(err);\r\n\t\t\t});\r\n\r\n\t\t})\r\n\t}\r\n\r\n\tadicionaLocal(dado){\r\n\r\n\t\tlet header = {'content-type': 'application/json'};\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tthis._http.post(`v1/localfornecedor`, JSON.stringify(dado), header)\r\n\t\t\t.then(res => resolve(res))\r\n\t\t\t.catch(err =>{\r\n\t\t\t    reject(err);\r\n\t\t\t});\r\n\r\n\t\t})\r\n\t}\r\n\r\n\tsobeAnexo(dado, subDiretorio, fileName, idfornecedor){\r\n\t\tlet header = {\r\n\t\t\t'content-type': 'application/octet-stream',\r\n\t\t\t'Accept': 'application/json',\r\n\t\t\t'filename': fileName,\r\n\t\t\t'subdiretorio': subDiretorio,\r\n\t\t\t'idfornecedor': idfornecedor\r\n\t\t}\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t//console.log(\"adiciona local\", this);\r\n\t\t\tthis._http.post(`v1/upload`, dado, header)\r\n\t\t\t.then(res => resolve(res))\r\n\t\t\t.catch(err =>{\r\n\t\t\t    reject(err);\r\n\t\t\t});\r\n\r\n\t\t})\r\n\t}\r\n\r\n\tdeletaAnexo(arquivo, subdir, idFornecedor){\r\n\t\tconsole.log(\"idFornecedor\", idFornecedor);\r\n\t\tlet header = {\r\n\t\t\tidfornecedor: idFornecedor\r\n\t\t}\r\n\t\treturn new Promise((resolve, reject) =>{\r\n\t\t\tthis._http.delete(`v1/upload/${subdir}/${arquivo}`, header)\r\n\t\t\t.then(res => resolve(res))\r\n\t\t\t.catch(err =>{\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\treject('Não foi possível deletar os fornecedores.')\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n}"]}